{% extends "base.html" %}

{% block content %}
<h1>–î—É–º–∞ –Ω–∞ –¥–µ–Ω—è</h1>
<div class="word-of-day">
    {% if word_data %}
    <div class="word-card">
        <h2>{{ word_data.word }}</h2>
        <p><strong>–î–µ—Ñ–∏–Ω–∏—Ü–∏—è:</strong> {{ word_data.definition }}</p>
        <p><strong>–¢—Ä—É–¥–Ω–æ—Å—Ç:</strong>
            <span class="difficulty-{{ word_data.difficulty }}">
                {% if word_data.difficulty == "beginner" %}üü¢ –ù–∞—á–∏–Ω–∞–µ—â
                {% elif word_data.difficulty == "intermediate" %}üü° –ù–∞–ø—Ä–µ–¥–Ω–∞–ª
                {% else %}üî¥ –ï–∫—Å–ø–µ—Ä—Ç{% endif %}
            </span>
        </p>
        <p><strong>–°–∏–Ω–æ–Ω–∏–º–∏:</strong> {{ word_data.synonyms | join(', ') }}</p>
        <p><strong>–ü—Ä–∏–º–µ—Ä:</strong> {{ word_data.examples[0] }}</p>
    </div>
    {% else %}
    <p>–ù—è–º–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –¥—É–º–∞—Ç–∞ –Ω–∞ –¥–µ–Ω—è.</p>
    {% endif %}

    <div class="actions">
        <button onclick="location.reload()">üé≤ –ù–æ–≤–∞ –¥—É–º–∞</button>
        <button onclick="getWordInfo()">‚ÑπÔ∏è –ü–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
    </div>

    <div id="wordInfo" class="additional-info"></div>
</div>

<script>
async function getWordInfo() {
    const word = "{{ word_data.word }}";

    try {
        const response = await fetch(`/api/v1/word-info/${encodeURIComponent(word)}`);
        const data = await response.json();

        document.getElementById('wordInfo').innerHTML = `
            <h3>–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ "${data.word}":</h3>
            <p><strong>–î–µ—Ñ–∏–Ω–∏—Ü–∏—è –æ—Ç API:</strong> ${data.info.definition}</p>
            <p><strong>–°–∏–Ω–æ–Ω–∏–º–∏:</strong> ${data.info.synonyms.join(', ')}</p>
            <p><strong>–¢—Ä—É–¥–Ω–æ—Å—Ç:</strong> ${data.info.difficulty}</p>
        `;
    } catch (error) {
        console.error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤–∑–∏–º–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:', error);
        document.getElementById('wordInfo').textContent = '–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –≤–∑–∏–º–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.';
    }
}
</script>

<style>
.word-card {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    border-left: 4px solid #007bff;
}

.actions {
    margin-bottom: 2rem;
}

.actions button {
    margin-right: 1rem;
}

.additional-info {
    background: #e9ecef;
    padding: 1rem;
    border-radius: 4px;
    margin-top: 1rem;
}
</style>
{% endblock %}